{% extends "base.html" %}
{% block content %}
<div class="p-6 space-y-6">

  <h1 class="text-2xl font-bold text-white flex items-center gap-2">
    <i data-lucide="wallet"></i> Caja
  </h1>

  <form method="get" class="flex flex-wrap gap-4 items-end">
    <div>
      <label class="block text-sm text-white">Desde</label>
      <input type="date" name="desde" value="{{ desde or '' }}"
             class="bg-gray-800 text-white p-2 rounded border border-gray-600" required>
    </div>
    <div>
      <label class="block text-sm text-white">Hasta</label>
      <input type="date" name="hasta" value="{{ hasta or '' }}"
             class="bg-gray-800 text-white p-2 rounded border border-gray-600" required>
    </div>
    <button type="submit"
            class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded flex items-center gap-2">
      <i data-lucide="search"></i> Filtrar
    </button>
  </form>

  <!-- KPIs -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-white">
    <div class="bg-gray-800 p-4 rounded shadow flex items-center gap-4">
      <i data-lucide="shopping-bag" class="w-6 h-6 text-blue-400"></i>
      <div>
        <p class="text-sm text-gray-400">Total de Ventas</p>
        <p class="text-xl font-semibold">${{ '%.2f' | format(total_ventas) }}</p>
      </div>
    </div>
    <div class="bg-gray-800 p-4 rounded shadow flex items-center gap-4">
      <i data-lucide="dollar-sign" class="w-6 h-6 text-green-400"></i>
      <div>
        <p class="text-sm text-gray-400">Dinero Ingresado</p>
        <p class="text-xl font-semibold">${{ '%.2f' | format(total_ingresado) }}</p>
      </div>
    </div>
    <div class="bg-gray-800 p-4 rounded shadow flex items-center gap-4">
      <i data-lucide="pie-chart" class="w-6 h-6 text-purple-400"></i>
      <div>
        <p class="text-sm text-gray-400">Métodos de Pago</p>
        <p class="text-xl font-semibold">{{ totales_por_metodo | length }}</p>
      </div>
    </div>
  </div>

  <!-- Detalle por método de pago -->
  <div class="bg-gray-900 p-4 rounded shadow text-white mt-6">
    <h2 class="text-lg font-bold mb-3 flex items-center gap-2">
      <i data-lucide="credit-card"></i> Detalle por Método de Pago
    </h2>
    <ul class="space-y-2">
      {% for metodo, total in totales_por_metodo.items() %}
        <li class="flex justify-between border-b border-gray-700 pb-1">
          <span class="capitalize">{{ metodo }}</span>
          <span class="font-semibold">${{ '%.2f' | format(total) }}</span>
        </li>
      {% endfor %}
    </ul>
  </div>

</div>
<script>
  lucide.createIcons()
</script>
{% endblock %}
